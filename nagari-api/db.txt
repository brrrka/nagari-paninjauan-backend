-- Buat database
CREATE DATABASE IF NOT EXISTS nagari_paninjauan
  CHARACTER SET utf8mb4
  COLLATE utf8mb4_unicode_ci;

USE nagari_paninjauan;

-- Tabel BERITA
CREATE TABLE IF NOT EXISTS berita (
  id         INT UNSIGNED NOT NULL AUTO_INCREMENT,
  title      VARCHAR(500) NOT NULL,
  category   VARCHAR(100) NOT NULL,
  date       DATE NOT NULL,
  imageUrl   VARCHAR(500) DEFAULT NULL,
  headline   TINYINT(1) NOT NULL DEFAULT 0,
  content    LONGTEXT NOT NULL,
  created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  updated_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP
                              ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (id),
  KEY idx_berita_date (date),
  KEY idx_berita_headline (headline),
  KEY idx_berita_category (category)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- Tabel ADMIN_USERS
CREATE TABLE IF NOT EXISTS admin_users (
  id         INT UNSIGNED NOT NULL AUTO_INCREMENT,
  username   VARCHAR(50)  NOT NULL,
  password   VARCHAR(255) NOT NULL,
  email      VARCHAR(100) NOT NULL,
  created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  last_login TIMESTAMP NULL DEFAULT NULL,
  PRIMARY KEY (id),
  UNIQUE KEY uk_admin_users_username (username),
  UNIQUE KEY uk_admin_users_email (email)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;

-- Tabel ADMIN (jika memang dipakai terpisah dari admin_users)
CREATE TABLE IF NOT EXISTS admin (
  id         INT UNSIGNED NOT NULL AUTO_INCREMENT,
  username   VARCHAR(50)  NOT NULL,
  password   VARCHAR(255) NOT NULL,
  email      VARCHAR(100) NOT NULL,
  created_at TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (id),
  UNIQUE KEY uk_admin_username (username),
  UNIQUE KEY uk_admin_email (email)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;
